<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat History Search Engine</title>
    <!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Animate CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style type="text/css">
    :root {
        --primary-color: #a37af5;
      --primary-light: #e0e7ff;
      --secondary-color: #3830ce;
      --accent-color: #4895ef;
      --text-dark: #1e293b;
      --text-light: #64748b;
      --bg-light: #f8fafc;
      --bg-card: #ffffff;
      --highlight-color: #f59e0b;
    }
    body {
        font-family:  sans-serif;
        background-color: var(--bg-light);
        color: var(--text-dark);
        line-height: 2.6;
        background-color: #cfc3e1;
        
    }
    .search-header{
        background: linear-gradient(150deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 3rem ;
        margin-bottom: 5rem;
        position: relative;
    }
    .search-header::after {
      content: '';
      position: absolute;
      bottom: -50px;
      left: 0;
      right: 0;
      height: 100px;
      background: var(--bg-light);
      transform: skewY(-2deg);
      z-index: 1;
    }
    .search-container {
        position: relative;
        z-index: 2;
    }
    .search-input-group {
        max-width: 800px;
        margin: 0 auto;
        box-shadow: 0 10px 25px 3px;

    }
    .search-input {
        border: none;
        padding: 1.25rem ;
    }
    .highlight {
        background-color: #f59e0b;
    }
</style>

</head>
<body >

    <div class="d-flex flex-column min-vh-100">

        <header class="search-header">
            <div class="search-container">
               <div class="text-center mb-4 mt-5 ">
                <h1 class="display-4 fw-semibold mb-4" >
                    <i class="bi bi-chat-square-text-fill fs-100" style="color:rgb(213, 213, 243);"></i>
                Chat History Search</h1>
                <p class="lead" style="opacity: 0.7;">Find any message in your conversation history instantly</p>
               </div>
            </div>
        </header>

        <main class="flex-fill container my-4">
            <div class="row g-4">

                <!-- Search Engine-->

                <div class=" col-12">
                    <div class="search-container animate__animated animate__fadeIn">
                        <div class="d-flex flex-column">
                            <div class="input-group search-input-group rounded-pill  overflow-hidden">
                                <span class="input-group-text bg-white border-0 ps-4">
                                    <i class="bi bi-search text-muted"></i>
                                </span>
                                <input type="text" id="searchInput" class="form-control border-0 search-input" placeholder="Search for messages..."  >
                                <button id="searchButton" class="btn btn-warning text-white ">
                                    Search <i class="bi bi-arrow-right ms-2"></i>
                                </button>
                            </div>    
                            <div class="text-center text-muted mt-3">
                                <span id="messageCount" class="fw-semibold" style="color: var(--primary-color);">
                                        0
                                </span>
                                    Messages Indexed in Your History 
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Section  -->

                <div class="col-lg-8">
                    <div class="card animate__animated animate__fadeIn ">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-search"></i> Search Results</h5>
                            <span id="resultsCount" class="badge badge-count">0 results</span>
                        </div>
                        <div class="card-body" id="results" style="min-height: 300px;">
                            <div class="text-center no-results mt-5 pt-4">
                                <i class="bi bi bi-search-heart" ></i>
                                <p class="mt-3 text-muted">Enter a search term to find messages</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Messages Section -->

                <div class="col-lg-4">
                    <div class="card animate__animated animate__fadeIn animate__delay-1s">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i>Resent Messages</h5>
                            <a href="" class="text-primary fw-semibold text-decoration-none">View All</a>
                        </div>

                        <div class="card-body overflow-auto px-0" id="chatMessages" style="max-height: 500px;">
                            <div class="px-3 py-y text-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                    </div>    
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="container text-center">
                <p class="mb-0">Chat Search Engine &copy; 2025 | Built with <i class="bi bi-heart-fill text-danger"></i> by Adishwar Raj</p>
            </div>
        </footer>

        <a href="" class="floating-btn animate__animated animate__fadeInUp animate__delay-2s">
            <i class="bi bi-chat-square-text"></i>
        </a>

    </div>
    
    <!-- jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

<!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script type="text/javascript">
        // Sample data with more details
        const messages = [
        { 
            id: 1,
            text: "Hey, how are you doing today?", 
            sender: "Hitendra Kumar Dewangan", 
            time: "10:30 AM", 
            date: "Today",
            avatar: "HD"
        },
        { 
            id: 2,
            text: "Adishwar, can you send me the report by EOD?", 
            sender: "Rohit Kumar Sah", 
            time: "Yesterday", 
            date: "2:45 PM",
            avatar: "RS"
        },
        { 
            id: 3,
            text: "I'm working on the chat search engine project. The UI is coming along nicely!", 
            sender: "You", 
            time: "Yesterday", 
            date: "11:20 AM",
            avatar: "ME",
            isYou: true
        },
        { 
            id: 4,
            text: "Can you send me the latest chat history file? I need it for testing.", 
            sender: "Ankit Kumar", 
            time: "May 10", 
            date: "4:15 PM",
            avatar: "AK"
        },
        { 
            id: 5,
            text: "Don't forget the team meeting at 3 PM in Conference Room B.", 
            sender: "Sandeep Kumar", 
            time: "May 9", 
            date: "9:00 AM",
            avatar: "SK"
        },
        { 
            id: 6,
            text: "Let's catch up over a call later! I have some ideas to discuss.", 
            sender: "Rayyan Hussain", 
            time: "May 8", 
            date: "5:30 PM",
            avatar: "RH"
        },
        { 
            id: 7,
            text: "The weather today is really nice! Perfect for a lunch outside.", 
            sender: "Ankit Kumar", 
            time: "May 8", 
            date: "12:15 PM",
            avatar: "AK"
        },
        { 
            id: 8,
            text: "Did you check out the new movie that released last weekend?", 
            sender: "Anuj Kumar", 
            time: "May 7", 
            date: "7:45 PM",
            avatar: "AK"
        },
        { 
            id: 9,
            text: "Working on the inverted index implementation now. Should improve search performance significantly.", 
            sender: "You", 
            time: "May 6", 
            date: "3:10 PM",
            avatar: "ME",
            isYou: true
        },
        { 
            id: 10,
            text: "Let's meet at the cafeteria in 10 mins. Need to discuss the project timeline.", 
            sender: "Raj Kumar", 
            time: "May 5", 
            date: "1:50 PM",
            avatar: "RK"
        },
        { 
            id: 11,
            text: "Search functionality is almost complete! Just need to polish the UI.", 
            sender: "You", 
            time: "May 4", 
            date: "6:30 PM",
            avatar: "ME",
            isYou: true
        }
        ];

        function normalText(text) {
            return text.toLowerCase();
        }

        function highlightMatch(message, query){
            if (!query) return message;
            const regex =  new Regex(` ${query.replace(/[.*+?^${}()[\]\\]/g, '\\$&')}`, 'g');
            return message.replace(regex, '<span class="highlight">$1</span>');
        }

        function handleSearch() {
            const query = normalText(document.getElementById('searchInput').value.trim());
            const results =  document.getElementById('results');
            const count = document.getElementById('resultsCount');

            // Add loading animation________
            results.innerHTML = `
                <div class=" py-y text-center">
                    <div class="spinner-border text-primary mb-3" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="">Serching Messages....</p>
                </div>        
            `;
            // Seearch Delay for better UX______
            setTimeout(() => {
                if(!query) {
                    count.innerHTML = '0 results';
                    results.innerHTML = `
                    <div class="text-center no-results mt-5 pt-4">
                        <i class="bi bi bi-search-heart" ></i>
                        <p class="mt-3 text-muted">Enter a search term to find messages</p>
                    </div>
                    `;
                    return;
                }

                const matches = messages.filter(msg => normalize(msg.text).includes(querry));
                count.innerHTML = `${matches.length} result ${matches.length !== 1 ? 's' : ''}`;

                if (matches.length === 0) {
                    results.innerHTML = `
                        <div class="text-center no-results mt-5 pt-4 animate__animated animate__fadeIn">
                            <i class="bi bi-x-circle"></i>
                            <h5 class="mt-3">No messages found</h5>
                            <p class="text-muted">Try different keywords or check your spelling</p>
                        </div>
                    `;  //_______________________________________________________________________________________
                } else {
                    results.innerHTML = matches.map(msg => `
                        <div class="message-card animate__animated animate__fadeIn">
                            <div class="message-meta">
                                <div class="d-flex align-items-center">
                                    <div class="user-avatar" style="${msg.isYou ? 'background-color: #e0f2fe; color: #0369a1;' : ''}">
                                        ${msg.avatar}
                                     </div>
                                    <div>
                                        <strong>${msg.sender}</strong>
                                        <div class="text-muted small">${msg.date} · ${msg.time}</div>
                                    </div>
                                </div>
                            </div>
                        <div class="message-content">${highlightMatch(msg.text, query)}</div>
                 </div>
                `).join('');
            }
        }, 600); // Simulated search delay
    }
    
    
    </script>

</body>
</html>